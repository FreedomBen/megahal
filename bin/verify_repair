#!/usr/bin/env ruby -KU

require 'megahal'

megahal = MegaHAL::Brain.new

File.read('corpora/sherlock.txt').each_line do |line|
  megahal.observe(line)
end

original = File.open('original.txt', 'wb')
repaired = File.open('repaired.txt', 'wb')

File.read('corpora/sherlock.txt').each_line do |line|
  norms = megahal.normalise(line)
  sentence = megahal.reconstitute(norms)
  next if sentence == line.strip
  original.write line
  repaired.write sentence
  repaired.write "\n"
end
